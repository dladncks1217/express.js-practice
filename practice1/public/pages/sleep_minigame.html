<!DOCTYPE html>
<html lang="ko" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>미니게임</title>
    <link rel="stylesheet" href="/stylesheets/201814129_4.css">
    <style media="screen">
      h1{
        text-align:center
      }
      #textareas{
        width:660px;
        height:250px;
        font-family:TTche;
        margin:0px auto;
        resize:none;
        text-align:center;
        border-radius:10px;
        box-shadow:0px 0px 2px 2px pink;
         background-color:#fff7cd;
      }
      #forms{
        margin:0px auto;
      }

    </style>
  </head>
  <body onload="onloads(); datefunction()">

<!-- ........................................................................................................................................header........................................................................................... -->
      <header>
        <p class="hello">&nbsp 201814129 임우찬</p>
            <center><h1>&lt; 편안한 숙면 &gt;</h1><center>
            <p id="dates" >...</p>

      </header>
<!-- ........................................................................................................................................nav........................................................................................... -->
      <nav>
        <div class="navs">

            <input type="image" src="/images/homebtn.PNG" id="homebtn" onclick="nav1()">
            <input type="image" src="/images/minigamebtn.PNG" id="minigamebtn" onclick="nav2()">

        </div>
      </nav>
      <div style="margin-left:10%; margin-right:10%;">


      <h1>미니게임</h1>
      <hr/>
    <center>
    <textarea id="textareas" readonly >
      게임 설명
      답은 전 페이지에서 나온 단어들로 구성되어 있습니다.
      설명에 맞는 답을 적으시면 됩니다.


    </textarea>
    <br>

    <input type="button" id="gmstart" onclick="gamestart()" value="게임시작">
    <input type="text" id="answer" value="">
    <input type="button" id="answer_check" value="정답 확인" onclick="answer_check()">
    <input type="button" id="nexts" value="다음문제" style="visibility:hidden;" onclick="nextclick()">
    <input type="button" id="explain" value="자세히 보기" style="visibility:hidden;" onclick="explainfunction()">
    <center>
    </div>
<!-- .............................................................................스크립트 시작............................................................................ -->

    <script type="text/javascript">
/* ---------------------------------------------------------------------------------변수생성--------------------------------------------------------------------------------- */

    var answers = ['키위','체리','바나나','상추','토마토','브로콜리','고기'];  //정답들

    var deleteArray=[];                                                //삭제될 배열 모음(거를배열들)
    var dArraynum = 0;                                                 //배열삭제위한변수
    var randomnums;                                                     // 배열변수 재생성
    var i=0;                                                              //맞은횟수계산변수

    /* ------------------------------------------------------------------------함수생성----------------------------------------------------------------------------------- */
    function onloads(){                                                //처음 시작될 때 실행될 함수
      var randomnum = Math.floor(Math.random()*7);
      randomnums=randomnum;
      deleteArray[dArraynum] = randomnum;
      document.getElementById('answer').focus();
    }

    function gamestart(){                                               //게임시작 눌렀을 때 실행되는 함수
      document.getElementById('gmstart').value = "문제 다시보기";
      problems();
      document.getElementById('answer').focus();
    }

    function answer_check(){                                              //결과확인함수
      var answer = document.getElementById('answer').value;
      if(document.getElementById('answer').value == answers[randomnums]){
        if(i==7){
          document.getElementById('textareas').value = "축하합니다 모든 문제를 맞췄습니다!";
          return;
        }
          document.getElementById('textareas').value = "정답입니다! 다음 문제로 넘어가시려면 다음 문제 버튼을 클릭해주세요.";                                      //문제를 맞췄을경우
          delete answers[randomnums];
          document.getElementById('answer').value = "";
          document.getElementById('nexts').style.visibility = "visible";
          document.getElementById('explain').style.visibility="visible";
          i++;
          document.getElementById('answer').focus();

      }
      else{                                                                                                                                                   //틀렸을경우
        document.getElementById('textareas').value = "오답입니다! 다시 한번 더 생각해보세요.";
        document.getElementById('answer').focus();
      }
    }

    function explainfunction(){                                                                                                                           //자세히보기 버튼 눌렀을 때
      if(randomnums==0){
        location.href = '/sleep_minigame/kiwi';
      }
      if(randomnums==1){
        location.href = '/sleep_minigame/cherry';
      }
      if(randomnums==2){
        location.href = '/sleep_minigame/banana';
      }
      if(randomnums==3){
        location.href = '/sleep_minigame/lettuce';
      }
      if(randomnums==4){
        location.href = '/sleep_minigame/tomato';
      }
      if(randomnums==5){
        location.href = '/sleep_minigame/brocoly';
      }
      if(randomnums==6){
        location.href = '/sleep_minigame/meat';
      }
    }


    function nextclick(){                                                                                                                             //다음문제 버튼 클릭했을때 실행되는 함수
      document.getElementById('nexts').style.visibility = "hidden";
      document.getElementById('explain').style.visibility = "hidden";
      randomnums = Math.floor(Math.random()*7);
      while(true){
        if(answers[randomnums]!=undefined){
          break;
        }
        if(i==7){
          document.getElementById('textareas').value = "축하합니다 모든 문제를 맞췄습니다!";
          return;
        }
        else{
          randomnums = Math.floor(Math.random()*7);
      }

    }
    problems();
    document.getElementById('answer').focus();
  }


    function problems(){
    if(randomnums==0){
      document.getElementById('textareas').value = "숙면에 좋은 음식으로, 심근병증 즉 내피세포 기능이 이상이 있는 사람에게서 비타민 C정맥 주사 했더니 혈관의 단면적이 11/15% 증가하였고, 평균 혈류 속도가 무려 41%까지 증가했다고 합니다.";
    }
    if(randomnums==1){
      document.getElementById('textareas').value = "멜라토닌이라는 성분이 다량 함유되어있어 뇌에서 분비되는 호르몬을 생체리듬을 조절시키는 역할을 한다. 우리나라 말로는 버찌라고 부른다.";
    }
    if(randomnums==2){
      document.getElementById('textareas').value = "세라토닌이라는 수면유도 성분을 생성하는데 도움을 준다. 마그네슘이 풍부하게 들어가있어 밤잠을 잘 이루지 못하는 분들에게 효과가 좋다. 환절기의 면역력도 키워준다.";
    }
    if(randomnums==3){
      document.getElementById('textareas').value = "신진대사를 도와줘 피로회복에 좋다. 긴장을 완화시켜주고 미네랄도 풍부하다. 피를 맑게 해주는 효능도 있어 숙취 해소에도 좋다. 음주 후 두통 해소에도 좋다.";
    }
    if(randomnums==4){
      document.getElementById('textareas').value = "비타민과 무기질 공급원으로, 항산화 물질을 함유하고 있고 뇌졸중 · 심근경색 예방에 도움이 되나, 산도가 높은 음식이라 잠들기 4시간 전에 먹으면 위산의 분비를 활발하게 만들어 속쓰림 현상을 동반할 수 있다.";
    }
    if(randomnums==5){
      document.getElementById('textareas').value ="미네랄, 비타민, 파이토케미컬 등이 풍부해 건강에 좋으나, 식이섬유가 많이 들어있어 잠이 오는 것을 방해할 수 있다. 식이섬유는 소화가 느리게 되는데, 식이섬유를 소화하는 동안 소화기관이 계속 활동하면 숙면을 취하기 어려울 수 있다.";
    }
    if(randomnums==6){
      document.getElementById('textareas').value = "이것의 단백질은 분자 구조가 복잡하기 때문에 소화가 잘 안된다. 또 이것의 단백질을 소화하기 위해서는 산성이 강한 위산이 필요하다. 이 위산은 속쓰림과 소화불량을 일으킬 수 있다.";
    }
  }
  /* -------------------------------------------------------------------------------------------------------------------------Date 함수---------------------------------------------------------------------------------------- */
        function datefunction(){
        var now = new Date();
        var year = now.getFullYear();
        var month = now.getMonth()+1;
        var day = now.getDay();
        var date = now.getDate();
        var hour = now.getHours();
        var minute = now.getMinutes();
        var second = now.getSeconds();
        var day_name = ["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];

        hour = mk_zero(hour);
        minute = mk_zero(minute);
        second = mk_zero(second);

          document.getElementById("dates").innerText = year+"년"+month+"월"+date+"일"+day_name[day]+hour+"시"+minute+"분"+second+"초";
          var timereload = setTimeout(function(){datefunction()},1000);
    }
    function mk_zero(i){
      if(i<10){i="0"+i};
      return i;
    }
  /* -------------------------------------------------------------------------------------------------------------------------버튼들 함수---------------------------------------------------------------------------------------- */
    function nav1(){
      location.href="/";
    }
    function nav2(){
      location.href="/sleep_minigame";
    }
    </script>
  </body>
</html>
